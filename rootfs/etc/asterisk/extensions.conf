[general]
static=yes
writeprotect=no
clearglobalvars=no

[globals]

[outbound-playback]
; Context for automated outbound calls
exten => s,1,NoOp(=== Outbound Call Started ===)
    same => n,NoOp(Phone: ${PHONE_NUMBER})
    same => n,NoOp(Audio: ${AUDIO_FILE})
    same => n,NoOp(Call ID: ${CALL_ID})
    same => n,Answer()
    same => n,Wait(1)
    same => n,Playback(custom/${AUDIO_FILE})
    same => n,Wait(2)
    same => n,System(curl -X POST "http://localhost:8088/api/call_status?call_id=${CALL_ID}&status=completed" 2>/dev/null)
    same => n,Hangup()

exten => h,1,NoOp(=== Call Ended ===)
    same => n,System(curl -X POST "http://localhost:8088/api/call_status?call_id=${CALL_ID}&status=hangup" 2>/dev/null)

[inbound]
; Context for incoming calls
exten => _X.,1,NoOp(=== Incoming Call ===)
    same => n,NoOp(From: ${CALLERID(num)})
    same => n,Set(CALL_ID=${UNIQUEID})
    same => n,System(curl -X POST "http://localhost:8088/api/call_status?call_id=${CALL_ID}&status=ringing" 2>/dev/null)
    same => n,Answer()
    same => n,Wait(1)
    same => n,Playback(welcome)
    same => n,System(curl -X POST "http://localhost:8088/api/call_status?call_id=${CALL_ID}&status=answered" 2>/dev/null)
    same => n,Hangup()

[internal]
; Internal extension-to-extension calls
exten => _1XX,1,NoOp(=== Internal Call to ${EXTEN} ===)
    same => n,Dial(SIP/${EXTEN},30,tr)
    same => n,Hangup()

[default]
; Default context (fallback)
exten => _X.,1,NoOp(=== Default Context ===)
    same => n,Hangup()
